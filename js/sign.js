$(function(){function t(n){$.get("./json/msg.json",function(t){t=t[n],$(".window>p:first").html(t.title+"<span>x</span>"),$(".pt>input").attr("placeholder",t.p1),$(".pc").attr({placeholder:t.p2,type:t.type}),$(".w-main>a>span").html(t.btn),$(".window>p:last>a:first").html(t.t1),$(".window>p:last>a:last").html(t.t2),$(".window>p:first>span").click(function(){$("body").removeAttr("style"),$(".w-out").css("display","none"),l()}),$(".w-main input").val("")},"json")}function n(){$("body").css("overflow","hidden"),$(".w-out").css({display:"block",top:window.scrollY});var t=$(".window"),n=t.outerWidth(),e=t.outerHeight(),s=(document.body.offsetWidth-n)/2+"px",o=(document.body.offsetHeight-e)/2+"px";document.body.offsetWidth<=n&&(s="0px"),document.body.offsetHeight<=e&&(o="0px"),t.css({display:"block",top:o,left:s})}function e(){t($(".sign").attr("class")),n(),$(".w-main>label").css("display","block"),$(".pb").css("display","none"),s(),l()}function s(){$(".window>.void").css("display","none"),$(".w-main").css("display","block").next().removeAttr("style")}function o(t,n,e){var s=$(".user").val(),o=$(".pc").val();if(t.test(s))if(/^.{6,}$/g.test(o)){if(l(),e&&function(t){var n=$(".pt>a").html(),e=t.substr(0,3),s=t.substr(7);$(".w-main>a").siblings().css("display","none"),$(".alert>p:first>strong").html(n+" "+e+"****"+s).parent().parent().css("display","block"),$(".cbar").css("display","block"),$(".word:first>input")[0].focus(),$(".word>input").on("input",function(){var t=0,n=!0,e=parseInt($(this).val().substr(0,1));if(/^\d$/g.test(e)||($(this).val(""),n=!1),n){$(this).val(e),t=$(this).parent().index()+1;var s=0,o=setInterval(function(){50<(s+=2)&&clearInterval(o),$(".word>i").eq(t-1).css("width",s+"px")},10);t<=3&&$(".word").eq(t).children()[1].focus()}else if(!e.length){t=$(this).parent().index()-1;s=$(this).prev().outerWidth(),o=setInterval(function(){(s-=2)<0&&clearInterval(o),$(".word>i").eq(t+1).css("width",s+"px")},10);0<=t&&$(".word").eq(t).children()[1].focus()}})}(s),"下一步 "!=$(".w-main>a>span").html()){if("下一步"==$(".w-main>a>span").html())return void(function(){for(var t=$(".word>input"),n=0;n<t.length;n++)if(!t.eq(n).val())return!1;return!0}()?($(".attend").css("display","block").children("span").html("注册成功！").css("color","green").prev().css("opacity",0),setTimeout(function(){location.reload()},1e3)):$(".attend").css("display","block").children("span").html("请输入验证码"));$.get("./json/msg.json",{id:s,password:o},function(t){t=t.user;for(var n=0;n<t.length;n++)if(s==t[n].id)return $(".attend").css("display","block"),o==t[n].pwd?($(".attend>span").html("登录成功！").css("color","green").prev().css("opacity",0),void setTimeout(function(){location.href="./index.html?code=200"},1e3)):void $(".attend>span").html("账号或密码错误！");$(".attend").css("display","block").children("span").html("账号或密码错误！")},"json")}}else $(".pc").css("borderColor","#f08b8b"),$(".attend").css("display","block"),$(".attend>span").html("请输入密码，至少6位");else $(".pt").css("borderColor","#f08b8b"),$(".user").css("color","#c20c0c"),$(".attend").css("display","block"),$(".attend>span").html(n)}function i(){var s=0;$(".pt>a").click(function(){s?$(this).siblings("ul").removeAttr("style"):($(this).siblings("ul").css("display","block"),$(".pt>ul").children().length||$.get("./json/msg.json",function(t){t=t.area;var n="";for(var e in t)n+="<li>"+e+"<span>"+t[e]+"</span></li>";$(".pt>ul").html(n),$(".pt>ul>li").click(function(){var t=$(this).children("span").html();$(".pt>a").html(t),3<t.length?$(".pt>a").css("backgroundPositionX",6*(t.length-3)-230+"px"):$(".pt>a").removeAttr("style"),$(".pt>ul").removeAttr("style"),s=!s})},"json")),s=!s})}function l(){$(".pt").removeAttr("style"),$(".pc").removeAttr("style").parent().removeAttr("style"),$(".attend").removeAttr("style").children("span").removeAttr("style").prev().removeAttr("style"),$(".alert").removeAttr("style").next().removeAttr("style")}$(".login").hover(function(){$(this).children(".c-ul").css("display","block")},function(){$(this).children(".c-ul").css("display","none")}),$(".m-login").click(function(){t($(this).attr("class").replace("-","")),n(),$(".pt>a").length||($(".pt").prepend('<a href="javascript:;">+86</a>'),i(),$(".pt>input").removeAttr("style")),$(".w-main>label").removeAttr("style"),$(".pb").removeAttr("style"),s(),l()}),$(".e-login").click(function(){t($(this).attr("class").replace("-","")),n(),$(".pt>a").remove(),$(".w-main>label").removeAttr("style"),$(".pb").removeAttr("style"),$(".pt>input").css({width:"206px",padding:"5px 6px"}),s(),l()}),$(".sign").click(function(){e()}),$(".window>p:last>a:first").click(function(){!function(){if(1<=$(".window>.void").length)for(var t=0;t<$(".window>.void").length;t++)$(".window>.void").eq(t).remove();$(".void").eq(0).clone(!0).insertBefore(".w-main").siblings().not(".window>p:first").css("display","none"),l()}(),$(".window>p:first").html("登录<span>x</span>").children("span").click(function(){$(".w-out").removeAttr("style"),$("body").removeAttr("style"),l()})}),$(".window>p:first")[0].onmousedown=function(t){var i=t.offsetX,l=t.offsetY;document.onmousemove=function(t){var n=t.clientX-i,e=t.clientY-l,s=document.body.offsetWidth-$(".window").outerWidth(),o=document.body.offsetHeight-$(".window").outerHeight();return s<n&&(n=s),n<0&&(n=0),o<e&&(e=o),e<0&&(e=0),$(".window").css({left:n,top:e}),!1}},document.onmouseup=function(){this.onmousemove=null},i(),$(".w-main>a").click(function(){var t=$(".window>p:first").text();if("手机号登录x"==t||"手机号注册x"==t){var n=/^1[345789]\d{9}$/g,e=!1;if("手机号注册x"==t)e=!0,"下一步"==$(this).children().html()?$(this).children().html("下一步 "):$(this).children().html("下一步");o(n,"请输入正确的手机号",e)}else{o(n=/^[a-zA-z]\w{5,17}@163.com/g,"请输入正确的邮箱号")}}),$(".user").focus(function(){$(this).css("color",""),$(".pt").removeAttr("style")}),$(".pc").focus(function(){$(this).removeAttr("style")}),$(".window>p:last>a:last").click(function(){e()})});